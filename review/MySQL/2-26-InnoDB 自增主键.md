# InnoDB 自增主键

- 如果定义了主键， InnoDB 会选择主键作为聚集索引
- 如果没有显示定义主键，会选择第一个不包含 NULL 的唯一索引作为主键索引
- 如果没有上面的唯一索引，会选择内置 6 字节长的 rowId 作为隐含的聚集索引，rowId 随行记录的写入递增。

- 如果使用非自增主键，由于每次插入主键的值不固定，每次记录都要被插入现有索引页的中间某个位置，MySQL 会将记录插到合适位置而移动数据，会增加很多开销，频繁的移动、分页会造成大量的碎片，出现不够紧凑的索引结构。

注意事项：

- 如果正在使用 InnoDB 表没有什么数据需要聚集，可以定义一个代理键作为主键，这种主键的数据应该和应用无关，最简单的方法是使用自增主键。

- 对于高并发工作负载，在 InnoDB 中按主键顺序插入可能会造成明显的征用。
